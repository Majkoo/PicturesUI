<div class="container">
  <h2 class="mb-3">Lista błędów HTTP w obecnej sesji</h2>

  <div class="mb-4" *ngIf="logs.errors">
    <p-accordion [activeIndex]="0" >
      <p-accordionTab style="justify-content: flex-start"
                      *ngFor="let displayLog of logs.errors, index as i">
        <ng-template pTemplate="header">
          <div class="w-100 d-flex justify-content-between align-items-center">
            <div>
              <span class="headerSpan"><strong>{{i+1}}.&ensp;</strong></span>
              <span class="headerSpan">Status: <b>{{logs.errors[i].status}}</b>,&ensp;</span>
              <span class="headerSpan">Godzina: {{logs.errors[i].date | date:'HH:mm:ss'}}</span>
            </div>
            <div>
              <span class="headerSpan">Metoda: <strong>{{logs.errors[i].request.method}}</strong></span>
            </div>
          </div>
        </ng-template>
        <ng-template pTemplate="body">
          <code class="mb-3"><pre class="pre-scrollable">{{jsonToString(displayLog)}}</pre></code>
          <div class="w-100 text-center">
            <button pButton pRipple label="Skopiuj błąd" icon="bi bi-clipboard" class="mt-3" (click)="copyErrorLog(displayLog)"></button>
          </div>
        </ng-template>
      </p-accordionTab>
    </p-accordion>

    <div class="w-100 text-center mt-3" *ngIf="isLoggedOn">
      <button pButton pRipple label="Wyślij logi do programisty" icon="bi bi-send" (click)="sendErrorLogs()" [disabled]="!canSendLogs"></button>
    </div>
  </div>

  <div *ngIf="!logs.errors.length">
    <p>Brak błędów do wyświetlenia</p>
    <div class="my-3 border">
      <img src="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fi2-prod.mirror.co.uk%2Fincoming%2Farticle6469391.ece%2FALTERNATES%2Fs810%2FShrek.jpg&f=1&nofb=1"
           alt="Brak błędów" class="img-fluid">
    </div>
  </div>
</div>
